parameters:
- name: rgEnvironment
  type: string 
  default: "COMPANY-rg-PRODUCT-001"
- name: integrationPath 
  type: string 
  default: "."
- name: integrationProject
  type: string 
  default: "*.csproj"
- name: appcsConnection
  type: string 
  default: ""

steps:
  - task: DotNetCoreCLI@2
    displayName: 'dotnet test'
    inputs:
      command: test
      projects: |
        ${{ parameters.integrationPath }}/**/${{ parameters.integrationProject }}
    env:
      GTC_WWW_CONNECTION: ${{ parameters.appcsConnection }}
      ASPNETCORE_ENVIRONMENT: ${{ parameters.rgEnvironment }}
      AZURE_FUNCTIONS_ENVIRONMENT: ${{ parameters.rgEnvironment }}