parameters:
- name: armPath 
  type: string 
  default: "."
- name: unitPath 
  type: string 
  default: "."
- name: unitProject
  type: string 
  default: "*.Unit.Tests.csproj"

steps:
  - task: DotNetCoreCLI@2
    displayName: 'dotnet test'
    inputs:
      command: test
      projects: |
        ${{ parameters.unitPath }}/**/${{ parameters.unitProject }}
    env:
      COMPANY_PRODUCT_CONFIGURATION: $(appcsConnection)
      ASPNETCORE_ENVIRONMENT: $(rgEnvironment)
      AZURE_FUNCTIONS_ENVIRONMENT: $(rgEnvironment)
